{% extends 'base.html' %}
{% block content %}
<nav class="navbar nabvar-expand-lg navbar-light bg-light">
    <h2 class="navbar-brand"><a href="{% url 'main:calender' %}">戻る</a>
        {{month}}月{{day}}日{{week}}</h2>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav">
            <a href="#">{{user}}</a>
            {% if user.is_staff %}
            <a href="#">管理者画面</a>
            {% endif %}
            <a href="{% url 'accounts:logout' %}">ログアウト</a><br>
        </div>
    </div>
</nav>

<ul class="nav nav-tabs mx-auto col-sm-2">
  <li class="nav-item">
    <a href="#absence" class="nav-link active" data-toggle="tab">代わって欲しい</a>
  </li>
  <li class="nav-item">
    <a href="#alternative" class="nav-link" data-toggle="tab">代わってあげる</a>
  </li>
</ul>

<div class="tab-content">
    <div id="absence" class="tab-pane list-group active">
        <a class="list-group-item" href="{% url 'main:absenceCreate' %}?y={{year}}&m={{month}}&d={{day}}&w={{week}}">
            <span>追加する(欠席)</span>
            <span>+</span>
        </a>
        {% for absence in absence_list %}
            <p class="list-group-item">
                <span class="col-sm-8">{{absence.Absence_user.username}}</span>
                <span><button type="button" class="btn btn-primary btn-sm">AM</button></span>
                <span><button type="button" class="btn btn-danger btn-sm">PM</button></span>
                <form action={% url 'main:absenceChange' absence.id %} method="post">
                    {% csrf_token %}
                    <input type="submit" value="代わる！">
                </form>
            </p>
        {% endfor %}
    </div>

    <div id="alternative" class="tab-pane list-group">
        <a class="list-group-item" href="{% url 'main:alternativeCreate' %}?y={{year}}&m={{month}}&d={{day}}&w={{week}}">
            <span>追加する(出席)</span>
            <span>+</span>
        </a>
        {% for alternative in alternative_list %}
            <p class="list-group-item">
                <span class="col-sm-8">{{alternative.Alternative_user.username}}</span>
                <span><button type="button" class="btn btn-primary btn-sm">AM</button></span>
                <span><button type="button" class="btn btn-danger btn-sm">PM</button></span>
                <form action={% url 'main:alternativeChange' alternative.id %} method="post">
                    {% csrf_token %}
                    <input type="submit" value="代わる！">
                </form>
            </p>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% comment %} <span><button type="button" class="btn btn-success" onclick="location.href="{% url 'main:addalternative' absence.id %}"">代わる</button></span> {% endcomment %}

